"use strict";!function(t){t.ajax({url:"http://10.31.163.69/shop/php/indexdata.php",dataType:"json"}).done(function(i){var n='<div class="bkcx-content">';t.each(i,function(i,t){n+='\n            <div class="bkcx-content-item">\n            <dl>\n                    <dt>\n                        <a href="http://10.31.163.69/shop/src/details.html?sid='+t.sid+'" target="_blank">\n                            <img class="lazy" data-original="'+t.url+'" width="200" height="243">\n                        </a>\n                    </dt>\n                    <dd class="bkcx-content-item-dd1">\n                        <b>'+t.count+'折/</b>\n                        <a href="http://10.31.163.69/shop/src/details.html?sid='+t.sid+'" target="_blank" title="'+t.title+'">'+t.title+'</a>\n                    </dd>\n                    <dd class="bkcx-content-item-dd2">\n                        <span>¥'+t.price+"</span>\n                        <b> ¥"+t.oprice+'</b>\n                        <a href="http://10.31.163.69/shop/src/details.html?sid='+t.sid+'" target="_blank" target="_blank">加入购物车</a>\n                    </dd>\n                </dl>\n                </div>\n            '}),n+="</div>",t(".bkcx").append(n),t(function(){t("img.lazy").lazyload({effect:"fadeIn"})})});var i,n=t(".banner"),e=(t(".lunboul"),t(".lunboul li")),s=(t("lunbool"),t(".lunbool li")),o=0,c=null;s.on("click",function(){o=t(this).index(),t(this).addClass("active").siblings("li").removeClass("active"),e.eq(t(this).index()).animate({zIndex:1,opacity:1},666).siblings().animate({zIndex:0,opacity:0},666)}),i=function(){o=++o<s.length+1?o:0,s.eq(o).addClass("active").siblings().removeClass("active"),e.eq(o).animate({zIndex:1,opacity:1},666).siblings().animate({zIndex:0,opacity:0},666)},c=setInterval(i,2e3),n.hover(function(){clearInterval(c)},function(){c=setInterval(i,2e3)})}(jQuery),function(o){var i=new Promise(function(i,t){o("header").load("index.html .header-bar",function(){i("header加载完成")})}),t=new Promise(function(i,t){o("footer").load("index.html .footer-bottom",function(){i("footer加载完成")})});function s(i,t,n){var e=new Date;e.setDate(e.getDate()+n),document.cookie=i+"="+encodeURIComponent(t)+";expires="+e}function n(i){for(var t=decodeURIComponent(document.cookie).split("; "),n=0;n<t.length;n++){var e=t[n].split("=");if(e[0]==i)return e[1]}}if(Promise.all([i,t]).then(function(){o.getScript("http://10.31.163.69/shop/src/script/js/headerlogin.js")}),n("cookiesid")&&n("cookienum")){var e=n("cookiesid").split(","),c=n("cookienum").split(",");o.each(e,function(i,t){!function(e,s){o.ajax({url:"http://10.31.163.69/shop/php/indexdata.php",dataType:"json"}).done(function(i){o.each(i,function(i,t){if(e==t.sid){console.log(e);var n=o(".item-hide:hidden").clone(!0,!0);n.find(".cart-information1-pic").find("img").attr("src",t.url),n.find(".cart-information1-pic").find("img").attr("sid",t.sid),n.find(".cart-information1-info-name").find("a").html(t.title),n.find(".now-price").find("strong").html(t.price),n.find(".last-price").find("b").html(t.oprice),n.find(".quantity").find("input").val(s),n.find(".cart-sum1-price").find("strong").html((t.price*s).toFixed(2)),n.css("display","block"),o(".cart-content-middle-item table tbody").append(n),a()}})})}(e[i],c[i])})}function a(){var n=0,e=0;o(".item-hide:visible").each(function(i,t){o(t).find(".quantity input")&&(n+=parseInt(o(t).find(".quantity").find("input").val()),e+=parseFloat(o(t).find(".cart-sum1-price").find("strong").html()))}),o(".cart-money-num").find("b").html(n),o(".cart-money-sum").html("￥"+e.toFixed(2))}n("cookiesid")&&n("cookienum")?(o(".hiden-car").hide(),o(".cart-content").show()):(o(".hiden-car").show(),o(".cart-content").hide()),o(".allsel").on("change",function(){o(".goods-item:visible").find(":checkbox").prop("checked",o(this).prop("checked")),o(".allsel").prop("checked",o(this).prop("checked")),a()});var r=o(".goods-item:visible").find(":checkbox");function l(i){return(parseFloat(i.parents(".item-hide").find(".now-price").find("strong").html())*parseInt(i.parents(".item-hide").find(".quantity input").val())).toFixed(2)}o(".item-list").on("change",r,function(){o(".goods-item:visible").find("input:checkbox").length==o(".goods-item:visible").find("input:checked").size()?o(".allsel").prop("checked",!0):o(".allsel").prop("checked",!1),a()}),o(".quantity .quantity-r-a").on("click",function(){var i=o(this).parents(".cart-num1").find("input").val();99<=++i&&(i=99),o(this).parents(".cart-num1").find("input").val(i),o(this).parents(".item-hide").find(".cart-sum1 .cart-sum1-price").find("strong").html(l(o(this))),a(),p(o(this))}),o(".quantity .quantity-l-a").on("click",function(){var i=o(this).parents(".cart-num1").find("input").val();--i<=1&&(i=1),o(this).parents(".cart-num1").find("input").val(i),o(this).parents(".item-hide").find(".cart-sum1 .cart-sum1-price").find("strong").html(l(o(this))),a(),p(o(this))}),o(".quantity input").on("input",function(){var i=parseInt(o(this).val());/^\d+$/g.test(i)?99<=i?o(this).val(99):i<=0?o(this).val(1):o(this).val(i):o(this).val(1),o(this).parents(".item-hide").find(".cart-sum1 .cart-sum1-price").find("strong").html(l(o(this))),a(),p(o(this))});var d=[],u=[];function h(){n("cookiesid")&&n("cookienum")&&(d=n("cookiesid").split(","),u=n("cookienum").split(","))}function p(i){h();var t=i.parents(".item-hide").find("img").attr("sid");u[o.inArray(t,d)]=i.parents(".item-hide").find(".quantity input").val(),s("cookienum",u.toString(),7)}function f(n,i){var e=-1;o.each(i,function(i,t){n==t&&(e=i)}),i.splice(e,1),u.splice(e,1),s("cookiesid",i.toString(),7),s("cookienum",u.toString(),7)}o(".item-hide").on("click",".cart-operation1 a",function(i){h(),confirm("你确定要删除吗？")&&o(this).first().parents(".item-hide").remove(),f(o(this).first().parents(".item-hide").find("img").attr("sid"),d),a()}),o(".operation a:first").on("click",function(){h(),confirm("你确定要全部删除吗？")&&(o(".goods-item:visible").each(function(){o(this).find("input:checkbox").is(":checked")&&(o(this).remove(),f(o(this).find("img").attr("sid"),d))}),a())})}(jQuery),function(s){var i=location.search.substring(1).split("=")[1],t=new Promise(function(i,t){s("header").load("index.html header",function(){i("header加载完成")})}),n=new Promise(function(i,t){s(".footer").load("index.html .footer",function(){i("footer加载完成")})});function e(i,t,n){var e=new Date;e.setDate(e.getDate()+n),document.cookie=i+"="+encodeURIComponent(t)+";expires="+e}function o(i){for(var t=decodeURIComponent(document.cookie).split("; "),n=0;n<t.length;n++){var e=t[n].split("=");if(e[0]==i)return e[1]}}Promise.all([t,n]).then(function(){s.getScript("http://10.31.163.69/shop/src/script/js/headerlogin.js")}),s.ajax({url:"http://10.31.163.69/shop/php/detail.php",data:{sid:i},dataType:"json"}).done(function(i){s("#smallpic").attr("src",i.url),s("#bpic").attr("src",i.url),s("#smallpic").attr("sid",i.sid),s("dd h1").html(i.title),s("dd p").html(i.message),s(".money").html(i.price),s(".count").prepend(i.count),s(".under").append(i.oprice);var t=i.urls.split(","),n="";s.each(t,function(i,t){n+='<li><img src="'+t+'"/></li>'}),s("#list ul").html(n)}),function(){s("#sf").width(s("#spic").width()*s("#bf").width()/s("#bpic").width()),s("#sf").height(s("#spic").height()*s("#bf").height()/s("#bpic").height());var e=s("#bpic").width()/s("#spic").width();s("#spic").hover(function(){s("#sf").css("visibility","visible"),s("#bf").css("visibility","visible"),s(this).on("mousemove",function(i){var t=i.pageX-s(".wrap").offset().left-s("#sf").width()/2,n=i.pageY-s(".wrap").offset().top-s("#sf").height()/2;t<0?t=0:t>=s("#spic").width()-s("#sf").width()&&(t=s("#spic").width()-s("#sf").width()),n<0?n=0:n>=s("#spic").height()-s("#sf").height()&&(n=s("#spic").height()-s("#sf").height()),s("#sf").css("left",t),s("#sf").css("top",n),s("#bpic").css("left",-t*e),s("#bpic").css("top",-n*e)})},function(){s("#sf").css("visibility","hidden"),s("#bf").css("visibility","hidden")}),s("#list ul").on("click","li",function(){var i=s(this).find("img").attr("src");s("#smallpic").attr("src",i),s("#bpic").attr("src",i)});var t=6;s("#right").on("click",function(){var i=s("#list ul li");i.length>t&&(t++,s("#left").css("color","#333"),i.length==t&&s("#right").css("color","#fff"),s("#list ul").animate({left:-(t-6)*i.eq(0).innerWidth()}))}),s("#left").on("click",function(){var i=s("#list ul li");6<t&&(t--,s("#right").css("color","#333"),t<=6&&s("#left").css("color","#fff"),s("#list ul").animate({left:-(t-6)*i.eq(0).innerWidth()}))})}();var c=[],a=[];function r(){o("cookiesid")&&o("cookienum")&&(c=o("cookiesid").split(","),a=o("cookienum").split(","))}s(".sum-num-up").on("click",function(){var i=s(this).parents(".sum-num").find("input").val();99<=++i&&(i=99),s(this).parents(".sum-num").find("input").val(i)}),s(".sum-num-down").on("click",function(){var i=s(this).parents(".sum-num").find("input").val();--i<=1&&(i=1),s(this).parents(".sum-num").find("input").val(i)}),s(".car").on("click",function(){var i=s(this).parents(".detials-main-content").find("#smallpic").attr("sid");if(r(),-1!=s.inArray(i,c)){var t=parseInt(a[s.inArray(i,c)])+parseInt(s("#sum").val());a[s.inArray(i,c)]=t,e("cookienum",a.toString(),10)}else c.push(i),e("cookiesid",c.toString(),10),a.push(s("#sum").val()),e("cookienum",a.toString(),10)}),s(".car").on("click",function(){s(".success").css({display:"block"})}),s(".continue").on("click",function(){s(".success").css({display:"none"})})}(jQuery),function(i){function t(i){for(var t=decodeURI(document.cookie).split("; "),n=0;n<t.length;n++){var e=t[n].split("=");if(e[0]==i)return e[1]}}function n(i,t){!function(i,t,n){var e=new Date;e.setDate(e.getDate()+n),document.cookie=i+"="+encodeURI(t)+";expires="+e}(i,t,-1)}i(function(){t("UserName")&&(i(".welcome").hide(),i(".show-welcome").show().find(".welcome-name").html(t("UserName"))),i(".show-welcome .welcome-close").on("click",function(){n("UserName",""),i(".show-welcome").hide(),i(".welcome").show()})})}(jQuery),function(t){var n=t(".songhuo .address strong");t(".send-select ul li a").on("mousedown",function(){var i=t(this).text();n.text(i),t(".send-select").css({display:"none"})}),t(".songhuo").hover(function(){t(".send-select").css({display:"block"})},function(){t(".send-select").css({display:"none"})});var i=t(".mask-address-body dl dt a");i.hover(function(){t(this).css({background:"#ddd6c8",color:"#fff",borderRadius:5})},function(){t(this).css({background:"",color:"#666",borderRadius:5})}),i.on("mousedown",function(){var i=t(this).text();n.text(i),t(".mask").css({display:"none"}),t(".mask-address").css({display:"none"})})}(jQuery),function(s){var i=s(".louti"),t=s(".scroll"),n=s(".louceng"),o=s(".louti li");s(window).on("scroll",function(){var e=s(window).scrollTop();300<e?(i.show(),t.show()):(i.hide(),t.hide()),n.each(function(i,t){var n=s(t).offset().top;if(e<n+800)return o.css({backgroundPositionX:-67}),o.eq(i).css({backgroundPositionX:0}),!1})}),o.on("click",function(){s(this).css({backgroundPositionX:0}).siblings().css({backgroundPositionX:-67});var i=n.eq(s(this).index()).offset().top;s("html,body").animate({scrollTop:i})}),t.on("click",function(){s("html,body").animate({scrollTop:0})})}(jQuery),function(n){n("#btn").on("click",function(){var t=n("#username").val(),i=n("#password").val();n.ajax({type:"post",url:"http://10.31.163.69/shop/php/login.php",data:{name:t,pass:i},success:function(i){i?(function(i,t,n){var e=new Date;e.setDate(e.getDate()+n),document.cookie=i+"="+encodeURI(t)+";expires="+e}("UserName",t,7),location.href="http://10.31.163.69/shop/src/index.html"):(n("#error").html("用户名或者密码错误"),n("#password").val(""))}})})}(jQuery),function(i){i(function(){i("#form1").validate({rules:{username:{required:!0,minlength:2,maxlength:10,remote:{url:"http://10.31.163.69/shop/php/reg.php",type:"post"}},password:{required:!0,minlength:6,maxlength:20},repass:{required:!0,equalTo:"#password"}},messages:{username:{required:"用户名不能为空",minlength:"用户名不能小于2",maxlength:"用户名不能大于10",remote:"用户名已存在"},password:{required:"密码不能为空",minlength:"密码不能小于6",maxlength:"密码不能大于20"},repass:{required:"密码重复不能为空",equalTo:"两次密码不一样"}}})}),i.validator.setDefaults({success:function(i){i.text("√").css("color","green").addClass("valid")}})}(jQuery);