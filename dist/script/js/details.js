"use strict";!function(c){var i=location.search.substring(1).split("=")[1],t=new Promise(function(i,t){c("header").load("index.html header",function(){i("header加载完成")})}),s=new Promise(function(i,t){c(".footer").load("index.html .footer",function(){i("footer加载完成")})});function n(i,t,s){var n=new Date;n.setDate(n.getDate()+s),document.cookie=i+"="+encodeURIComponent(t)+";expires="+n}function e(i){for(var t=decodeURIComponent(document.cookie).split("; "),s=0;s<t.length;s++){var n=t[s].split("=");if(n[0]==i)return n[1]}}Promise.all([t,s]).then(function(){c.getScript("http://10.31.163.69/shop/src/script/js/headerlogin.js")}),c.ajax({url:"http://10.31.163.69/shop/php/detail.php",data:{sid:i},dataType:"json"}).done(function(i){c("#smallpic").attr("src",i.url),c("#bpic").attr("src",i.url),c("#smallpic").attr("sid",i.sid),c("dd h1").html(i.title),c("dd p").html(i.message),c(".money").html(i.price),c(".count").prepend(i.count),c(".under").append(i.oprice);var t=i.urls.split(","),s="";c.each(t,function(i,t){s+='<li><img src="'+t+'"/></li>'}),c("#list ul").html(s)}),function(){c("#sf").width(c("#spic").width()*c("#bf").width()/c("#bpic").width()),c("#sf").height(c("#spic").height()*c("#bf").height()/c("#bpic").height());var n=c("#bpic").width()/c("#spic").width();c("#spic").hover(function(){c("#sf").css("visibility","visible"),c("#bf").css("visibility","visible"),c(this).on("mousemove",function(i){var t=i.pageX-c(".wrap").offset().left-c("#sf").width()/2,s=i.pageY-c(".wrap").offset().top-c("#sf").height()/2;t<0?t=0:t>=c("#spic").width()-c("#sf").width()&&(t=c("#spic").width()-c("#sf").width()),s<0?s=0:s>=c("#spic").height()-c("#sf").height()&&(s=c("#spic").height()-c("#sf").height()),c("#sf").css("left",t),c("#sf").css("top",s),c("#bpic").css("left",-t*n),c("#bpic").css("top",-s*n)})},function(){c("#sf").css("visibility","hidden"),c("#bf").css("visibility","hidden")}),c("#list ul").on("click","li",function(){var i=c(this).find("img").attr("src");c("#smallpic").attr("src",i),c("#bpic").attr("src",i)});var t=6;c("#right").on("click",function(){var i=c("#list ul li");i.length>t&&(t++,c("#left").css("color","#333"),i.length==t&&c("#right").css("color","#fff"),c("#list ul").animate({left:-(t-6)*i.eq(0).innerWidth()}))}),c("#left").on("click",function(){var i=c("#list ul li");6<t&&(t--,c("#right").css("color","#333"),t<=6&&c("#left").css("color","#fff"),c("#list ul").animate({left:-(t-6)*i.eq(0).innerWidth()}))})}();var o=[],l=[];function r(){e("cookiesid")&&e("cookienum")&&(o=e("cookiesid").split(","),l=e("cookienum").split(","))}c(".sum-num-up").on("click",function(){var i=c(this).parents(".sum-num").find("input").val();99<=++i&&(i=99),c(this).parents(".sum-num").find("input").val(i)}),c(".sum-num-down").on("click",function(){var i=c(this).parents(".sum-num").find("input").val();--i<=1&&(i=1),c(this).parents(".sum-num").find("input").val(i)}),c(".car").on("click",function(){var i=c(this).parents(".detials-main-content").find("#smallpic").attr("sid");if(r(),-1!=c.inArray(i,o)){var t=parseInt(l[c.inArray(i,o)])+parseInt(c("#sum").val());l[c.inArray(i,o)]=t,n("cookienum",l.toString(),10)}else o.push(i),n("cookiesid",o.toString(),10),l.push(c("#sum").val()),n("cookienum",l.toString(),10)}),c(".car").on("click",function(){c(".success").css({display:"block"})}),c(".continue").on("click",function(){c(".success").css({display:"none"})})}(jQuery);